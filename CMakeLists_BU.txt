# Set the minimum required version of CMake to be 3.10
cmake_minimum_required(VERSION 3.10)

# Create a project named Tutorial
project(MEC VERSION 0.1)

# Set the variable CMAKE_CXX_STANDARD to 11 and make it a requirement
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED True)

# Specify the path to SUNDIALS header files
set(SUNDIALS_INCLUDE_DIR
  C:/Program Files/SUNDIALS/include
  CACHE PATH "Location of SUNDIALS header files")

# Specify the path to SUNDIALS libraries
set(SUNDIALS_LIBRARY_DIR
  C:/Program Files/SUNDIALS/lib
  CACHE PATH "Location of SUNDIALS libraries")

  # Find the SUNDIALS libraries
find_library(SUNDIALS_SOLVER_LIB
sundials_cvode ${SUNDIALS_LIBRARY_DIR}
DOC "CVODE library")

find_library(SUNDIALS_NVEC_LIB
sundials_nvecserial ${SUNDIALS_LIBRARY_DIR}
DOC "NVECTOR_SERIAL library")

find_library(SUNDIALS_MANYVEC_LIB
sundials_nvecmanyvector ${SUNDIALS_LIBRARY_DIR}
DOC "NVECTOR_MANYVECTOR library")

# Set additional libraries
set(SUNDIALS_EXTRA_LIBS  CACHE STRING "Additional libraries")

# Add third party packages
find_package(SUNDIALS REQUIRED)

# For SUNDIALS module examples the solver library is not needed
if(NOT SUNDIALS_SOLVER_LIB)
  set(SUNDIALS_SOLVER_LIB "")
endif()

# List of SUNDIALS libraries
set(SUNDIALS_LIBRARIES
  -L${SUNDIALS_LIBRARY_DIR}
  ${SUNDIALS_SOLVER_LIB}
  ${SUNDIALS_NVEC_LIB}
  ${SUNDIALS_MANYVEC_LIB}
  ${SUNDIALS_EXTRA_LIBS})

# Include the current directory
include_directories(.)

# Use configure_file to configure and copy TutorialConfig.h.in to
# TutorialConfig.h
# configure_file(MECConfig.h.in MECConfig.h)

# Add an executable called MEC to the project
# Be sure to specify the min source file (main.cpp)
add_executable(MEC main.cpp)

# Add third party packages
find_package(SUNDIALS REQUIRED)

# Add librarary directories 
# target_link_libraries(MEC PUBLIC SUNDIALS::cvode)
# target_link_libraries(Tutorial PUBLIC MathFunctions)

# Add include directories
# ${PROJECT_SOURCE_DIR} is a path to the project source. AKA This folder!
# target_include_directories(Tutorial PUBLIC
#                            "${PROJECT_BINARY_DIR}"                  
#                            "${PROJECT_SOURCE_DIR}/MathFunctions"
#                            )

target_include_directories(MEC PRIVATE ${SUNDIALS_INCLUDE_DIR})

target_link_libraries(MEC ${SUNDIALS_LIBRARIES})